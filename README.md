# rpn-calculator
zy
# RPN计算器 - 功能详解与使用指南

## 📋 目录
- [概述](#概述)
- [核心功能](#核心功能)
- [安装与运行](#安装与运行)
- [基本使用方法](#基本使用方法)
- [高级功能](#高级功能)
- [错误处理](#错误处理)
- [实用技巧](#实用技巧)

## 📖 概述

逆波兰表示法（Reverse Polish Notation，简称RPN）是一种数学表达式表示法，其中运算符位于操作数之后。这种表示法由波兰数学家扬·武卡谢维奇在1920年引入，最大的优点是不需要使用括号来指定运算优先级。

**传统表示法 vs RPN表示法：**
```
中缀表达式: (3 + 4) × 5
RPN表达式: 3 4 + 5 ×
```

## 🎯 核心功能

### 基础算术运算
| 运算符 | 功能说明 | 示例输入 | 计算结果 |
|--------|----------|----------|----------|
| `+` | 加法运算 | `3 4 +` | 7 |
| `-` | 减法运算 | `5 2 -` | 3 |
| `*` | 乘法运算 | `3 4 *` | 12 |
| `/` | 除法运算 | `8 2 /` | 4 |

### 高级数学运算
| 运算符 | 功能说明 | 示例输入 | 计算结果 |
|--------|----------|----------|----------|
| `sqrt` | 平方根 | `9 sqrt` | 3 |
| `pow` | 幂运算 | `2 3 pow` | 8 |
| `sin` | 正弦函数(弧度) | `3.14159 sin` | ≈0 |
| `cos` | 余弦函数(弧度) | `0 cos` | 1 |
| `tan` | 正切函数(弧度) | `0 tan` | 0 |

### 栈操作命令
| 命令 | 功能说明 | 示例 |
|------|----------|------|
| `clear` | 清空整个栈 | `clear` |
| `display` | 显示当前栈内容 | `display` |
| `help` | 显示帮助信息 | `help` |

## 🔧 安装与运行

### 编译步骤
```bash
# 使用g++编译
g++ -std=c++11 -o rpn_calculator main.cpp -lm

# 或者使用clang++
clang++ -std=c++11 -o rpn_calculator main.cpp -lm
```

### 运行程序
```bash
./rpn_calculator
```

程序启动后会显示欢迎信息并进入交互模式：
```
RPN Calculator started. Type 'help' for instructions.
> 
```

## 📝 基本使用方法

### 1. 简单表达式计算
```
> 3 4 +
Result: 7

> 5 2 *
Result: 10

> 8 4 /
Result: 2
```

### 2. 复杂表达式计算
RPN的强大之处在于处理复杂表达式时不需要括号：

**示例1：** `(3 + 4) × 5`
```
> 3 4 + 5 *
Result: 35
```

**示例2：** `5 + ((1 + 2) × 4) - 3`
```
> 5 1 2 + 4 * + 3 -
Result: 14
```

**计算过程详解：**
```
初始栈: []
输入5: [5]
输入1: [5, 1]
输入2: [5, 1, 2]
输入+: 弹出2和1，计算1+2=3 → [5, 3]
输入4: [5, 3, 4]
输入*: 弹出4和3，计算3×4=12 → [5, 12]
输入+: 弹出12和5，计算5+12=17 → [17]
输入3: [17, 3]
输入-: 弹出3和17，计算17-3=14 → [14]
最终结果: 14
```

### 3. 连续计算
RPN计算器支持连续运算，中间结果会自动保存在栈中：
```
> 5
Result: 5
> 3
Result: 3
> +
Result: 8
> 2
Result: 2
> *
Result: 16
```

## 🚀 高级功能

### 数学函数应用

**平方根计算：**
```
> 16 sqrt
Result: 4

> 2 sqrt
Result: 1.41421
```

**幂运算：**
```
> 2 3 pow
Result: 8

> 5 2 pow
Result: 25
```

**三角函数（注意使用弧度制）：**
```
> 0 sin
Result: 0

> 1.5708 sin    # π/2 ≈ 1.5708
Result: 1

> 0 cos
Result: 1

> 3.14159 cos   # π ≈ 3.14159
Result: -1
```

### 栈操作技巧

**查看栈状态：**
```
> 5 3 8
Result: 8
> display
Stack (top to bottom): 8 3 5 
```

**清空栈重新开始：**
```
> 1 2 3 4
Result: 4
> display
Stack (top to bottom): 4 3 2 1 
> clear
> display
Stack is empty
```

## ⚠️ 错误处理

计算器提供了详细的错误信息来帮助用户诊断问题：

### 常见错误类型

**1. 除零错误：**
```
> 5 0 /
Error: Division by zero
```

**2. 操作数不足：**
```
> +
Error: Not enough operands for addition

> 5 +
Error: Not enough operands for addition
```

**3. 无效输入：**
```
> 3 abc +
Error: Invalid token 'abc'

> 999999999999999999999999999999
Error: Number out of range '999999999999999999999999999999'
```

**4. 表达式不完整：**
```
> 3 4 + 5
Error: Invalid expression - stack has 2 elements instead of 1
```

## 💡 实用技巧

### 1. 表达式构建策略
- **从左到右**：按运算顺序逐步构建表达式
- **先内后外**：先计算内部表达式，再处理外部运算
- **利用栈显示**：使用`display`命令检查中间结果

### 2. 复杂表达式分解
将复杂的中缀表达式转换为RPN的步骤：

**示例：** `(2 + 3) × (8 - 4) ÷ 2`

**步骤1：** 计算 `2 + 3`
```
> 2 3 +
Result: 5
```

**步骤2：** 计算 `8 - 4`
```
> 8 4 -
Result: 4
```

**步骤3：** 相乘并除以2
```
> 5 4 * 2 /
Result: 10
```

### 3. 弧度与角度转换
由于三角函数使用弧度制，如需使用角度：
```
# 计算 sin(30°)
> 30 3.14159 * 180 / sin
Result: 0.5

# 计算 cos(60°)
> 60 3.14159 * 180 / cos
Result: 0.5
```

## 🎓 学习RPN的优势

1. **无歧义性**：不需要括号，运算顺序明确
2. **易于实现**：算法简单，适合计算机处理
3. **计算效率**：单次扫描即可完成计算
4. **教育价值**：帮助理解栈数据结构的应用

## 🔚 退出程序

使用以下命令退出计算器：
```
> quit
Goodbye!
```

或者：
```
> exit
Goodbye!
```

---

这个RPN计算器不仅是一个实用的计算工具，也是学习逆波兰表示法和栈数据结构的优秀教学工具。通过实践使用，您将更好地理解这种高效且优雅的数学表达式表示方法。
